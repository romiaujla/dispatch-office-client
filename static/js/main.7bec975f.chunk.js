(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){e.exports=a(40)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),s=(a(27),a(2)),l=a(3),i=a(5),u=a(4),m=a(6),p=(a(28),a(11)),h=(a(29),a(9)),d=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"Header blue-back white-text"},r.a.createElement("div",{className:"width-wrapper"},r.a.createElement(h.b,{to:"/"},r.a.createElement("div",{className:"logo"},r.a.createElement("span",null,"Dispatch"),r.a.createElement("span",null,"Office"))),r.a.createElement("div",{className:"menu"},r.a.createElement("nav",{className:""},r.a.createElement("button",{className:"mobile-nav-button blue-back"},r.a.createElement("div",{className:"l1 white-back"}),r.a.createElement("div",{className:"l2 white-back"}),r.a.createElement("div",{className:"l3 white-back"}))))))}}]),t}(n.Component),b=(a(35),r.a.createContext({basePath:"",loggedIn:function(){},newUser:function(){},setLoggedIn:function(){},setNewUser:function(){}})),f=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.basePath;return r.a.createElement("div",{className:"HomePageSection width-wrapper"},r.a.createElement("p",null,"Welcome !! to ",r.a.createElement("span",{className:"span-title red-text"},"Dispatch Office"),", a transportation management system, which assists freight managers with workflow, automation and shipment scheduling."),r.a.createElement(h.b,{to:"".concat(e,"/create-account"),className:"app-button"},"Create Account"),r.a.createElement(h.b,{to:"".concat(e,"/login"),className:"app-link"},"Login"))}}]),t}(n.Component);f.contextType=b;var E=f,g=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context,t=e.basePath,a=e.loggedIn,n=e.newUser;return a?n?r.a.createElement(p.a,{to:"".concat(t,"/newuser")}):r.a.createElement(p.a,{to:"".concat(t,"/dashboard")}):r.a.createElement("section",{className:"HomePage blue-text"},r.a.createElement(E,null))}}]),t}(n.Component);g.contextType=b;var v=g;a(36),a(37);function w(e){e.target.value}function N(e){e.target.value}var O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleFormSubmit=function(e){e.preventDefault();var t=e.target,a=t.username,n=t.password,r=t.full_name,c=t.company_name,o=t.mc_num,s={username:a.value,password:n.value,company_name:c.value,mc_num:o.value,full_name:r.value};console.log(s)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"CreateAccount width-wrapper",onSubmit:function(t){e.handleFormSubmit(t)}},r.a.createElement("fieldset",null,r.a.createElement("legend",{className:"blue-back white-text"},"Create Account"),r.a.createElement("div",{className:"flex"},r.a.createElement("label",{htmlFor:"username"},r.a.createElement("span",{className:"input-title"},"* Username:"),r.a.createElement("input",{type:"text",id:"username",name:"username",required:!0,onChange:function(e){w(e)}}),r.a.createElement("span",{className:"error"},"Invalid Username")),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("span",{className:"input-title"},"* Password:"),r.a.createElement("input",{type:"password",id:"password",name:"password",required:!0,onChange:function(e){N(e)}}),r.a.createElement("span",{className:"error"},"Password Error")),r.a.createElement("label",{htmlFor:"full_name"},r.a.createElement("span",{className:"input-title"},"* Full Name:"),r.a.createElement("input",{type:"text",id:"full_name",name:"full_name",required:!0}),r.a.createElement("span",{className:"error"},"Invalid Username")),r.a.createElement("label",{htmlFor:"company_name"},r.a.createElement("span",{className:"input-title"},"Company Name:"),r.a.createElement("input",{type:"text",id:"company_name",name:"company_name",required:!0}),r.a.createElement("span",{className:"error"},"Company Name Error")),r.a.createElement("label",{htmlFor:"mc_num"},r.a.createElement("span",{className:"input-title"},"MC Number:"),r.a.createElement("input",{type:"text",id:"mc_num",name:"mc_num"}),r.a.createElement("span",{className:"error"},"MC Number Error")),r.a.createElement("button",{className:"app-button",type:"submit"},"Create Account"))))}}]),t}(n.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context,t=e.basePath,a=e.loggedIn,n=e.newUser;return a?n?r.a.createElement(p.a,{to:"".concat(t,"/newuser")}):r.a.createElement(p.a,{to:"".concat(t,"/dashboard")}):r.a.createElement("div",{className:"CreateAccountPage"},r.a.createElement(O,null))}}]),t}(n.Component);j.contextType=b;var y=j,P=(a(38),a(39),{API_ENDPOINT:Object({NODE_ENV:"production",PUBLIC_URL:"/dispatch-office-client"}).API_ENDPOINT||"http://localhost:8000/api",TOKEN_KEY:Object({NODE_ENV:"production",PUBLIC_URL:"/dispatch-office-client"}).TOKEN_KEY||"9e7d73be-f7f1-11e9-8f0b-362b9e155667"}),I={saveAuthToken:function(e){window.localStorage.setItem(P.TOKEN_KEY,e)},getAuthToken:function(){return window.localStorage.getItem(P.TOKEN_KEY)},clearAuthToken:function(){window.localStorage.removeItem(P.TOKEN_KEY)},hasAuthToken:function(){return!!I.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},k=I,x={postLogin:function(e){return fetch("".concat(P.API_ENDPOINT,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new Error(e.error.message)}))})).catch((function(e){return e}))}},_=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,incorrectUsername:!1,incorrectPassword:!1},a.handleSubmitLoginForm=function(e){e.preventDefault(),a.setState({error:null,incorrectUsername:!1,incorrectPassword:!1});var t=e.target,n=t.username,r=t.password;x.postLogin({username:n.value,password:r.value}).then((function(e){console.log(e.message),"Incorrect Username"===e.message&&(a.setState({incorrectUsername:!0,error:e.message}),n.value="",r.value="",n.focus()),"Incorrect Password"===e.message?(a.setState({incorrectPassword:!0,error:e.message}),r.value=""):(n.value="",r.value=""),null==e.message&&(console.log("Good Login"),k.saveAuthToken(k.makeBasicAuthToken(n.value,r.value)),a.props.onLoginSuccess())})).catch((function(e){a.setState({error:e.error})}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.incorrectPassword,n=t.incorrectUsername,c=t.error;return r.a.createElement("form",{className:"LoginForm width-wrapper",onSubmit:function(t){e.handleSubmitLoginForm(t)}},r.a.createElement("fieldset",null,r.a.createElement("legend",{className:"blue-back white-text"},"Login"),r.a.createElement("div",{className:"flex"},r.a.createElement("label",{htmlFor:"username"},r.a.createElement("span",{className:"input-title"},"* Username:"),r.a.createElement("input",{type:"text",id:"username",name:"username",required:!0,onChange:function(e){w(e)}}),n&&r.a.createElement("span",{className:"error"},c)),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("span",{className:"input-title"},"* Password:"),r.a.createElement("input",{type:"password",id:"password",name:"password",required:!0,onChange:function(e){N(e)}}),a&&r.a.createElement("span",{className:"error"},c)),r.a.createElement("button",{className:"app-button",type:"submit"},"Login"))))}}]),t}(n.Component);_.defaultProps={onLoginSuccess:function(){}};var L=_,U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLoginSuccess=function(e){a.props.history.push("/"),a.context.setLoggedIn(!0)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.context,a=t.basePath,n=t.loggedIn,c=t.newUser;return n?c?r.a.createElement(p.a,{to:"".concat(a,"/newuser")}):r.a.createElement(p.a,{to:"".concat(a,"/dashboard")}):r.a.createElement("section",{className:"LoginPage"},r.a.createElement(L,{onLoginSuccess:function(){e.onLoginSuccess()}}))}}]),t}(n.Component);U.contextType=b;var C=U,S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.setState({loggedIn:k.hasAuthToken()})},a.setLoggedIn=function(e){console.log("Logged In: ".concat(e)),a.setState({loggedIn:e})},a.setNewUser=function(e){a.setState({newUser:e})},a.state={basePath:"/dispatch-office-client",loggedIn:!1,newUser:!1,setLoggedIn:function(){},setNewUser:function(){}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={basePath:this.state.basePath,loggedIn:this.state.loggedIn,newUser:this.state.newUser,setLoggedIn:this.setLoggedIn,setNewUser:this.setNewUser};return r.a.createElement(b.Provider,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(p.a,{to:e.basePath})),r.a.createElement(p.b,{exact:!0,path:e.basePath,component:v}),r.a.createElement(p.b,{exact:!0,path:"".concat(e.basePath,"/create-account"),component:y}),r.a.createElement(p.b,{exact:!0,path:"".concat(e.basePath,"/login"),component:C}))))}}]),t}(n.Component);o.a.render(r.a.createElement(h.a,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7bec975f.chunk.js.map